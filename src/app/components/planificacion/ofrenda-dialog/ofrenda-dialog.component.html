<h2 mat-dialog-title class="dlg-title">
  {{ isEdit ? 'EDITAR OFRENDA' : 'AGREGAR OFRENDA' }}
</h2>

<mat-dialog-content class="dlg-body">
  <form class="form" [formGroup]="form" (ngSubmit)="guardar()">
    <!-- Fecha -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Fecha</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        formControlName="fecha"
        placeholder="DD/MM/AAAA"
      />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="form.get('fecha')?.touched && form.get('fecha')?.invalid">
        Selecciona una fecha
      </mat-error>
    </mat-form-field>

    <!-- Descripción -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Descripción</mat-label>
      <textarea matInput rows="2" formControlName="descripcion"></textarea>
    </mat-form-field>

    <!-- Cantidad -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Cantidad</mat-label>
      <input
        matInput
        type="number"
        min="0"
        step="0.01"
        formControlName="cantidad"
        placeholder="Q"
      />
      <mat-error *ngIf="form.get('cantidad')?.touched && form.get('cantidad')?.hasError('required')">
        Ingresa una cantidad
      </mat-error>
      <mat-error *ngIf="form.get('cantidad')?.touched && form.get('cantidad')?.hasError('min')">
        La cantidad no puede ser negativa
      </mat-error>
    </mat-form-field>

    <!-- Evento -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Evento</mat-label>
      <mat-select formControlName="eventoId">
        <mat-option *ngFor="let e of eventos" [value]="e.id">
          {{ e.nombre }} — {{ e.fecha }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('eventoId')?.touched && form.get('eventoId')?.invalid">
        Selecciona un evento
      </mat-error>
    </mat-form-field>

    <div class="actions">
      <button mat-raised-button color="primary" class="btn-ok" type="submit" [disabled]="form.invalid">
        {{ isEdit ? 'Actualizar' : 'Guardar' }}
      </button>
      <button mat-stroked-button color="primary" type="button" (click)="cancelar()">
        Cancelar
      </button>
    </div>
  </form>
</mat-dialog-content>